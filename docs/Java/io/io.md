# IO

## 文件操作(File)

File对象是对路径的抽象，而不是对文件内容的抽象。想象它是一个“路牌”，路牌指向一个地方，但路牌本身并不关心那个地方存的是金子还是石头。

------

### File类常用API

1. 属性查询（看一看）

- exists()：判断文件/文件夹是否存在。
- isFile() / isDirectory()：判断是文件还是文件夹。
- length()：获取文件大小（字节数）。
- lastModified()：获取最后修改时间。

2. 获取路径（在哪儿）

- getName()：获取文件名（如 test.txt）。
- getPath()：获取创建File时给定的路径。
- getAbsolutePath()：获取绝对路径。
- getParent()：获取父级路径。

3. 创建与删除（动一动）

- createNewFile()：创建新文件（如果已存在则创建失败）。
- mkdir()：创建单层目录。
- mkdirs()：（推荐）递归创建多层目录（如果父文件夹不存在，它会一并创建）。
- delete()：删除文件或空文件夹。

4. 目录遍历（找一找）

- list()：返回 String 数组，包含所有文件名。
- listFiles()：（最常用）返回 File 数组，方便直接操作子文件对象。

------

### 面试考点

考点 1：mkdir()和mkdirs()的区别？

回答：mkdir()要求父目录必须存在，否则创建失败。mkdirs()会自动补全不存在的父目录。在实际开发中，为了代码健壮性，通常首选 mkdirs()。



考点 2：如何删除一个非空目录？

回答：File.delete() 只能删除文件或空文件夹。如果文件夹里有东西，删除会返回 false。
解决方案：必须使用递归。先进入目录，删除里面所有的子文件/子目录，最后再删除自己。



考点 3：路径分隔符的跨平台问题。

回答：Windows 用反斜杠 \，Linux/Mac 用正斜杠 /。
最佳实践：不要在代码里硬编码斜杠。应该使用 File.separator静态变量，或者直接用正斜杠 /（Java 在 Windows 下也能识别正斜杠）。

## 字节流

字节流（Byte Stream）是 Java 中最底层的 IO。

在计算机里，无论是文本、图片、音乐还是视频，最终都是以**二进制（0 和 1）**的形式存储在磁盘上的，这些二进制数据每8位就是一个**Byte（字节）**。

字节流就像一条**传送带**，它不关心传送带上放的是什么（是字符还是图片碎片），它只负责把一个又一个的字节（byte）从一个地方搬到另一个地方。

InputStream（输入流）：数据从外部（如硬盘文件）流向你的 Java 程序。

OutputStream（输出流）：数据从你的 Java 程序流向外部（如硬盘文件）。



字节流日常开发中你最常打交道的是这两个：

FileInputStream：

用途：从文件中读取字节。

场景：读取配置文件、读取图片数据进行处理等。



FileOutputStream：

用途：将字节写入文件。

场景：保存下载的文件、导出日志到本地等。



InputStream 的核心方法：

int read()：从输入流中读取一个字节。

注意：虽然读的是字节，但它返回一个 int，范围是 0-255。如果读到了文件末尾，它会返回-1。

void close()：关闭流，释放操作系统资源。



OutputStream 的核心方法：

void write(int b)：将一个字节写入输出流。
void flush()：强制将留在内存管道里的数据“刷”到目的地。
void close()：关闭流。


四、 面试高频考点

1. 为什么 read() 方法返回 int 而不是 byte？

原因：字节（byte）的取值范围是 -128 到 127。如果 read()直接返回 byte，那么当文件中存的正好是 -1对应的二进制码时，程序会分不清这是“真实数据”还是“文件结束符”。
解决：Java 将字节提升为 int（范围 0 到 255）。这样，在这个范围内所有的数都是数据，而-1就可以被独立出来作为唯一的“文件读取完毕”标志。

2. 字节流能处理中文吗？

- **答案**：**能，但不建议。**
- **细节**：字节流可以搬运中文字符的字节，但因为一个中文（UTF-8）占 3 个字节，如果你在读取过程中强行把这 3 个字节拆开来处理（比如一个一个字节转成 char 打印），就会出现乱码。
- **结论**：处理纯文本，请找它的兄弟——**字符流**。

3. 为什么一定要手动 close()？

- **答案**：Java 的 GC（垃圾回收）只能管理内存中的对象，不能管理操作系统的底层资源（如文件句柄、网络端口）。如果不手动关闭，这些资源就会一直被占用，直到程序崩溃。

4. FileOutputStream 的追加模式

- **考点**：默认情况下，`new FileOutputStream("a.txt")` 会覆盖原文件。
- **解决**：如果你想在原文件后面接着写，要用这个构造函数：`new FileOutputStream("a.txt", true)`。



## 字符流

## 缓冲处理

## 对象序列化

## 特殊流

## NIO

## AIO

## Netty
