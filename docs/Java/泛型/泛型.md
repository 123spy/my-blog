这是一个为你整理的 **Java 泛型 (Generics) 核心速查指南**。只保留了最关键的概念，适合随时翻阅复习。

------

# Java 泛型核心指南

### 1. 核心目的

泛型不是为了“让代码运行得更快”，而是为了：

1. **编译期安全检查**：在编译时就报错，而不是运行时抛出 `ClassCastException`。
2. **消除强制类型转换**：代码更干净，不需要 `(Cat) list.get(0)`。

------

### 2. 怎么定义 (三种方式)

#### A. 泛型类 (Generic Class)

类名后加 `<T>`，T 代表未知的类型。

Java

```
public class Box<T> {
    private T t;
    public void set(T t) { this.t = t; }
    public T get() { return t; }
}

// 使用：
Box<Integer> integerBox = new Box<>();
```

#### B. 泛型接口 (Generic Interface)

实现接口时，可以选择**确定**类型，也可以**保留**泛型。

Java

```
public interface Generator<T> {
    public T next();
}

// 方式1：实现时确定类型
class StringGenerator implements Generator<String> { ... }

// 方式2：实现时保留泛型
class GeneralGenerator<T> implements Generator<T> { ... }
```

#### C. 泛型方法 (Generic Method)

**注意 `<T>` 的位置**：必须放在返回值类型之前。

Java

```
//     声明泛型   返回值    参数
public <T>       T        getObject(Class<T> c) { ... }
```

------

### 3. 通配符与 PECS 原则 (核心难点)

这是泛型中最容易晕的地方，记住口诀：**PECS (Producer Extends, Consumer Super)**。

#### `?` (无界通配符)

- **含义**：`List<?>` 表示“任何类型的 List”。
- **用途**：通常用于只关心 `size()` 或 `clear()` 等与类型无关的操作。

#### `? extends T` (上界通配符) - 生产者 (Producer)

- **含义**：`T` 或 `T` 的子类。
- **能力**：**只读** (Read-only)。
- **场景**：你要从集合里**拿数据**出来用（它是数据的生产者）。
- **例子**：`List<? extends Number> list`，可以读取 `Number`，但不能写入（除了 null）。

#### `? super T` (下界通配符) - 消费者 (Consumer)

- **含义**：`T` 或 `T` 的父类。
- **能力**：**只写** (Write-only)。
- **场景**：你要把数据**放进**集合里去（它是数据的消费者）。
- **例子**：`List<? super Integer> list`，可以安全地 `add(new Integer(1))`。

------

### 4. 泛型的本质：类型擦除 (Type Erasure)

Java 的泛型是**伪泛型**。

- **编译时**：编译器进行类型检查。
- **运行时**：所有泛型信息都会被擦除（通常变为 `Object`）。
- **后果**：
  - `List<String>` 和 `List<Integer>` 在运行时是同一个类 (`ArrayList`)。
  - 你**不能**使用 `instanceof List<String>`。

------

### 5. 常见限制 (不能做的事)

1. 不能 new 泛型类型：

   T obj = new T(); // ❌ 编译错误 (因为运行时不知道 T 是啥)

2. 不能创建泛型数组：

   List<String>[] lists = new List<String>[10]; // ❌ 编译错误

3. 基本类型不能作为泛型参数：

   List<int> // ❌ 必须用 List<Integer>

4. 不能 catch 泛型异常：

   catch (T e) // ❌ 不允许

------

### 下一步建议

如果你想验证自己是否真的掌握了，建议你去看看 JDK 源码中 `java.util.Collections` 类的 `copy` 方法签名：

Java

```
public static <T> void copy(List<? super T> dest, List<? extends T> src)
```

**你能一眼看出为什么要这样写吗？** 如果可以，那泛型这关你就过了。